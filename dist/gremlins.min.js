/*!gremlins.js 0.8.0 - (c) 2013-2015 Andreas Wehr - https://github.com/grmlin/gremlins - Licensed under MIT license*/
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.gremlins=e()}}(function(){var e;return function t(e,n,r){function o(u,s){if(!n[u]){if(!e[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[u]={exports:{}};e[u][0].call(f.exports,function(t){var n=e[u][1][t];return o(n?n:t)},f,f.exports,t,e,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t){"use strict";function n(e){var t=e.getAttribute(c);if(t){var n=t.split(a);return n.map(function(e){return e.trim()})}return[]}function r(e){var t=n(e);t.forEach(function(t){return s.createInstance(e,t)})}function o(e){e.forEach(function(e){return r(e)})}function i(){}var u=e("watched"),s=e("./Factory"),c="data-gremlin",a=",";t.exports={observe:function(){var e=u("["+c+"]");e.on("added",o),e.on("removed",i);var t=Array.prototype.slice.call(e);o(t)}}},{"./Factory":3,watched:22}],2:[function(e,t){"use strict";var n=e("./uuid"),r="gremlins_"+n(),o={},i=function(){var e=1;return function(){return e++}}(),u=function(e){return void 0!==e[r]},s=function(e){return e[r]=i()},c=function(e){return u(e)?e[r]:s(e)};t.exports={hasGremlin:function(e,t){var n=c(e);return o[n]&&void 0!==o[n][t]},addGremlin:function(e,t,n){var r=c(e);o[r]=o[r]||{},o[r][t]=n}}},{"./uuid":8}],3:[function(e,t){"use strict";var n=e("./Data"),r=e("./Pool");t.exports={createInstance:function(e,t){r.fetch(t).then(function(r){if(n.hasGremlin(e,t))console.warn("Element already has a gremlin "+t,e);else{console.info("Creating gremlin "+t,e);var o=Object.create(r);n.addGremlin(e,t,o),o.__init__(e)}},function(){})}}},{"./Data":2,"./Pool":5}],4:[function(e,t){"use strict";var n=e("setprototypeof"),r=e("object-assign"),o=e("./Pool"),i={__init__:function(e){this.el=e,this.initialize()},create:function(e){var t=this,i=r({},e);if("string"!=typeof i.name)throw new Error("A gremlin spec needs a »name« property! It can't be found otherwise");if(void 0!==i.__init__)throw new Error("The internal constructor »__init__« for the gremlin spec "+i.name+" can't be overridden");return void 0!==i.create&&console.warn("You are replacing the original create method for the spec "+i.name+". You know what you're doing, right?"),"function"!=typeof i.initialize&&"function"!=typeof t.initialize&&(i.initialize=function(){}),n(i,t),o.add(Object.create(i))}};t.exports=i},{"./Pool":5,"object-assign":10,setprototypeof:11}],5:[function(e,t){"use strict";function n(e,t,n){var o={name:e,resolve:t,reject:n};f(e)?r(o):(u[e]=u[e]||[],u[e].push(o),s[e]=s[e]||setTimeout(function(){var t=u[e];t&&console.warn("A spec for gremlin "+e+" is still missing. Did you include it?")},c))}function r(e){var t=e.name,n=e.resolve,r=i[t];n(Object.create(r))}function o(e){var t=u[e];clearTimeout(s[e]),void 0!==t&&f(e)&&(t.forEach(r),delete u[e])}var i={},u={},s={},c=3e3,a=function(e,t){return i[e]=t},f=function(e){return void 0!==i[e]};t.exports={add:function(e){var t=e.name;if(f(t))throw new Error("Trying to add new Gremlin spec, but a spec for "+t+" already exists.");return a(t,e),o(t),e},fetch:function(e){return new Promise(function(t,r){setTimeout(function(){return n(e,t,r)},10)})}}},{}],6:[function(e,t){(function(e){"use strict";var n=function(){},r=["log","info","warn"];t.exports={create:function(){void 0===console&&(e.console={}),r.forEach(function(e){"function"!=typeof console[e]&&(console[e]=n())})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t){"use strict";var n=e("domready"),r=e("./consoleShim"),o=e("./Gremlin"),i=o.create,u=e("./Collection"),s=u.observe,c="gremlins_connected";r.create(),t.exports={create:i},n(function(){if(document.documentElement[c])throw new Error("You tried to include gremlin.js multiple times. Don't do that.");document.documentElement[c]=!0,s()})},{"./Collection":1,"./Gremlin":4,"./consoleShim":6,domready:9}],8:[function(e,t){"use strict";t.exports=function n(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,n)}},{}],9:[function(t,n){!function(t,r){"undefined"!=typeof n?n.exports=r():"function"==typeof e&&"object"==typeof e.amd?e(r):this[t]=r()}("domready",function(){var e,t=[],n=document,r=n.documentElement.doScroll,o="DOMContentLoaded",i=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return i||n.addEventListener(o,e=function(){for(n.removeEventListener(o,e),i=1;e=t.shift();)e()}),function(e){i?e():t.push(e)}})},{}],10:[function(e,t){"use strict";function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=Object.assign||function(e){for(var t,r,o=n(e),i=1;i<arguments.length;i++){t=arguments[i],r=Object.keys(Object(t));for(var u=0;u<r.length;u++)o[r[u]]=t[r[u]]}return o}},{}],11:[function(e,t){function n(e,t){e.__proto__=t}function r(e,t){for(var n in t)e[n]=t[n]}t.exports=Object.setPrototypeOf||{__proto__:[]}instanceof Array?n:r},{}],12:[function(e,t){(function(n){var r,o=!1;"smokesignals"in n&&(o=!0,r=n.smokesignals),e("./smokesignals"),t.exports=smokesignals,o?n.smokesignals=r:delete n.smokesignals}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./smokesignals":13}],13:[function(){smokesignals={convert:function(e,t){return t={},e.on=function(n,r){return(t[n]||(t[n]=[])).push(r),e},e.once=function(t,n){function r(){n.apply(e.off(t,r),arguments)}return r.h=n,e.on(t,r)},e.off=function(n,r){for(var o=t[n],i=0;r&&o&&o[i];i++)o[i]!=r&&o[i].h!=r||o.splice(i--,1);return i||delete t[n],e},e.emit=function(n){for(var r=t[n],o=0;r&&r[o];)r[o++].apply(e,r.slice.call(arguments,1));return e},e}}},{}],14:[function(e,t){var n=e("./util/helper"),r=e("./util/constants"),o=e("./LiveNodeList"),i=e("./domQueries/QueryStrategyFactory"),u={__name__:"DomElement"};r.AVAILABLE_QUERIES.forEach(function(e){u[e]=function(t){var n=i.create(e,this.el,t);return o(n)}}),t.exports=function(e){if(this instanceof t.exports)throw new Error("The DomElement is a factory function, not a constructor. Don't use the new keyword with it");if(n.isInvalidDomElement(e))throw new TypeError("The element to watch has to be a HTMLElement! The type of the given element is "+typeof e);var r=Object.create(u,{el:{value:e}});return r}},{"./LiveNodeList":15,"./domQueries/QueryStrategyFactory":17,"./util/constants":20,"./util/helper":21}],15:[function(e,t){var n=e("smokesignals"),r=e("./util/constants"),o=e("./util/helper"),i=e("./domQueries/DomQuery"),u=e("./observers/NativeObserver"),s=e("./observers/IntervalObserver"),c=Object.create(o.hasMutationObserver?u:s);c.init();var a=function(e,t){return e.filter(function(e){return!o.arrayContains(t,e)})},f={__name__:"LiveNodeList",init:function(e){this._isActive=!1,this._length=0,this._query=e,this._onMutateHandler=this._onMutate.bind(this),this.resume()},_onMutate:function(){var e,t,n,o,i=this._query.old(),u=this._query.current();e=a(u,i),t=a(i,u),this._updateArray(u),n=e.length>0,o=t.length>0,(n||o)&&this._bubble(r.CUSTOM_EVENT_ON_ELEMENTS_CHANGED,u),n&&this._bubble(r.CUSTOM_EVENT_ON_ELEMENTS_ADDED,e),o&&this._bubble(r.CUSTOM_EVENT_ON_ELEMENTS_REMOVED,t)},_updateArray:function(e){this._deleteArray(),this._length=e.length,e.forEach(function(e,t){this[t]=e},this)},_deleteArray:function(){Array.prototype.splice.call(this,0),this._length=0},_bubble:function(e,t){this.emit(e,t)},forEach:function(){Array.prototype.forEach.apply(this,arguments)},pause:function(){this._isActive=!1,c.off(r.CUSTOM_EVENT_ON_MUTATION,this._onMutateHandler)},resume:function(){this._isActive||(this._isActive=!0,this._updateArray(this._query.current()),c.on(r.CUSTOM_EVENT_ON_MUTATION,this._onMutateHandler))}};Object.defineProperty(f,"length",{get:function(){return this._length},set:function(){}}),n.convert(f),t.exports=function(e){if(this instanceof t.exports)throw new Error("The LiveNodeList is a factory function, not a constructor. Don't use the new keyword with it");var n=Object.create(i),r=Object.create(f);return n.init(e),r.init(n),r}},{"./domQueries/DomQuery":16,"./observers/IntervalObserver":18,"./observers/NativeObserver":19,"./util/constants":20,"./util/helper":21,smokesignals:12}],16:[function(e,t){var n=e("../util/helper");t.exports={init:function(e){this._query=e,this._old=[]},old:function(){return n.arrayClone(this._old)},current:function(){return this._old=this._query(),n.arrayClone(this._old)}}},{"../util/helper":21}],17:[function(e,t){var n=e("../util/constants"),r=e("../util/helper"),o={},i=function(e){return e.filter(function(e){return document.documentElement.contains(e)})};o[n.queries.QUERY_SELECTOR_ALL]=function(e,t){return function(){var o=e[n.queries.QUERY_SELECTOR_ALL](t);return i(r.nodeListToArray(o))}},o[n.queries.QUERY_SELECTOR]=function(e,t){return function(){var r=e[n.queries.QUERY_SELECTOR](t);return i(null===r?[]:[r])}},o[n.queries.GET_ELEMENTS_BY_TAG_NAME]=function(e,t){var o=e[n.queries.GET_ELEMENTS_BY_TAG_NAME](t);return function(){return i(r.nodeListToArray(o))}},o[n.queries.GET_ELEMENTS_BY_CLASS_NAME]=function(e,t){var o=e[n.queries.GET_ELEMENTS_BY_CLASS_NAME](t);return function(){return i(r.nodeListToArray(o))}},t.exports={create:function(e,t,n){return o[e](t,n)}}},{"../util/constants":20,"../util/helper":21}],18:[function(e,t){var n=e("smokesignals"),r=e("../util/helper"),o=e("../util/constants"),i=document.getElementsByTagName("*"),u=function(){return r.nodeListToArray(i)},s=function(e,t){return e.length!==t.length?!0:e.some(function(e,n){return e!==t[n]})},c={init:function(){this._currentElements=u(),this._initialize()},_initialize:function(){var e=this,t=function(){setTimeout(n,o.INTERVAL_OBSERVER_RESCAN_INTERVAL)},n=function(){e._checkDom(),t()};t()},_checkDom:function(){var e=u();s(this._currentElements,e)&&(this._currentElements=e,this.emit(o.CUSTOM_EVENT_ON_MUTATION))}};n.convert(c),t.exports=c},{"../util/constants":20,"../util/helper":21,smokesignals:12}],19:[function(e,t){var n=e("smokesignals"),r=e("../util/helper"),o=e("../util/constants"),i={childList:!0,subtree:!0},u=function(e){return null!==e.addedNodes||null!==e.removedNodes},s={init:function(){this._observer=new r.NativeMutationObserver(this._onMutation.bind(this)),this._observer.observe(document,i)},_onMutation:r.debounce(function(e){e.some(u,this)&&this.emit(o.CUSTOM_EVENT_ON_MUTATION)},o.MUTATION_DEBOUNCE_DELAY)};n.convert(s),t.exports=s},{"../util/constants":20,"../util/helper":21,smokesignals:12}],20:[function(e,t){var n={MUTATION_DEBOUNCE_DELAY:20,INTERVAL_OBSERVER_RESCAN_INTERVAL:500,CUSTOM_EVENT_ON_MUTATION:"CUSTOM_EVENT_ON_MUTATION",CUSTOM_EVENT_ON_ELEMENTS_ADDED:"added",CUSTOM_EVENT_ON_ELEMENTS_REMOVED:"removed",CUSTOM_EVENT_ON_ELEMENTS_CHANGED:"changed",AVAILABLE_QUERIES:[],queries:{QUERY_SELECTOR_ALL:"querySelectorAll",QUERY_SELECTOR:"querySelector",GET_ELEMENTS_BY_TAG_NAME:"getElementsByTagName",GET_ELEMENTS_BY_CLASS_NAME:"getElementsByClassName"}};Object.keys(n.queries).forEach(function(e){n.AVAILABLE_QUERIES.push(n.queries[e])}),t.exports=n},{}],21:[function(e,t){var n=e("./constants"),r=-1,o=!!(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver),i=o?MutationObserver||WebKitMutationObserver||MozMutationObserver:null;t.exports={hasMutationObserver:o,NativeMutationObserver:i,isInvalidDomElement:function(e){return e?n.AVAILABLE_QUERIES.some(function(t){return"function"!=typeof e[t]}):!0},nodeListToArray:function(e){return Array.prototype.slice.call(e)},arrayContains:function(e,t){return e.indexOf(t)!==r},arrayClone:function(e){return e.slice(0)},debounce:function(e,t,n){var r;return function(){var o=this,i=arguments;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(o,i)},t),n&&!r&&e.apply(o,i)}}}},{"./constants":20}],22:[function(e,t){var n=e("./src/DomElement");t.exports=function(e){if(this instanceof t.exports)throw new Error("watched is a factory function, not a constructor. Don't use the new keyword with it");return"string"==typeof e?n(document).querySelectorAll(e):n(e)}},{"./src/DomElement":14}]},{},[7])(7)});